<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frist Project</title>
    <link rel="icon" href="fotos/hacker ico3.ico">
    <link rel="stylesheet" href="style.css"> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>

  </head>
<body>
    <div class="page">
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class ="nav-item">
                        <a href="index.html" class ="nav-link">
                            <h3 class ="p10">home</h3>
                       </a>
                    </li>
                     <li class ="nav-item">
                        <a href="CV.html" class="nav-link">
                            <h4 class = "p10">CV</h4>
                        </a>
                    </li>
                    <li class ="nav-item">
                        <a href="mycity.html" class="nav-link">
                            <h4 class="p10">My City</h4>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class ="nav-link" href="hobbies.html">
                            <h4 class ="p10">hobbies</h4>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="courses.html" class ="nav-link">
                            <h4 class ="p10">courses</h4>
                        </a>
                    </li>
                </ul>
              </div>
            </div>
            <button type ="button"class ="btn button" name ="login" onclick="login()">
                <img class ="small-img"src ="fotos/login.png">
                </img>
            </button>
            <button class =" btn button" name ="darkmode">
                <img class ="small-img p10" src ="fotos/darkmode.png"></img>
            </button>
          </nav>
          <div style = "display: flex;  justify-content: center;">
            <button class ="btn btn-success vueBtn m10 p10" id="vueBtn" onclick="continueWITHvue()">continue with Vue.js</button>
            <button class ="btn btn-warning jsBtn m10 p10" id ="jsBtn" onclick="continueWITHjs()">continue with javascript</button>
          </div>
          
          <div class ="contactDiv">

            <!-- form with vue.js -->
            <div id ="app">
              <form @submit.prevent="submitForm" id ="vueForm">

                <label class ="form-label">Name:</label>
                <input type="text" id ="VUEname" name="name" class="form-control" v-model ="name"><br>

                <label class ="form-label">Mail:</label>
                <input id ="VUEemail" class="form-control" name="email" type ="email" v-model = "email"><br>

                <label class ="form-label">Your message:</label>
                <textarea id="VUEmessage" class="form-control" name="message" v-model ="message"></textarea><br>

                <button type="submit" class ="btn btn-success vueBtn" id="vueBtnSubmit">Vue.js</button>
                <button type="button" class = "btn btn-danger" @click="clearForm">Clear</button>
              </form>
            </div>

            <!-- form with javascript -->
            <form method="POST" id ="jsForm">
              <input type="hidden" name="access_key" value="57b77d34-87b6-4feb-8fc5-459172a8fe91">

              <label class ="form-label">Name:</label>
              <input type="text" id ="JSname" name="name" class="form-control"><br>

              <label class ="form-label">Mail:</label>
              <input id ="JSemail"name="email" class="form-control" type ="email"><br>

              <label class ="form-label">Your message:</label>
              <textarea id="JSmessage" name="message" class="form-control"></textarea><br>

              <button type="submit" class ="btn btn-warning jsBtn" id ="jsBtnSubmit">javascript</button>
              <button type="button" class = "btn btn-danger" onclick="clearTheFormWithJS()">Clear</button>
              <div id="result"></div>

            </form>
          </div>

        <footer class ="footer" style ="padding-top: 10px;">
            
            <a class = "m10" href="CV.html"><img class ="so-small-img" src="fotos/cv.png" alt="CV">CV</a>
            <a class = "m10" href="mycity.html"><img class ="so-small-img" src="fotos/mycity.png" alt="my city">My City</a>
            <a class = "m10" href="hobbies.html"><img class ="so-small-img" src="fotos/hobby.png" alt ="hobby">hobbies</a>
            <a class = "m10" href="courses.html"><img class ="so-small-img" src="fotos/courses.png" alt = "courses">courses</a>
            <a class = "m10" href="contact.html"><img class ="so-small-img" src="fotos/contact.png" alt="contact">contact with me</a>
            <footer class ="footer2">
                <!-- whatsapp -->
                <a href="https://wa.me/905013290133">
                    <img class ="small-img p10 m5" src="fotos/whatsapp.png" alt="whatsapp chat">
                </a>
                <!-- gitHub -->
                <a href="https://github.com/AHMED-MOHAMED-NAGY">
                    <img class ="small-img p10 m5" src="fotos/gitHub.png" alt="github">
                </a>
                <!--telegram-->
                <a href="https:t.me/AHMED_MOHAMED_NAGY">
                    <img class ="small-img p10 m5" src="fotos/telegram.png" alt="telegram">
                </a>
            </footer>
        </footer>
    </div>


<!-- the script that used at vueForm -->
<script>
  const WEB3FORMS_ACCESS_KEY = "57b77d34-87b6-4feb-8fc5-459172a8fe91";

  // Define Vue component
  const App = new Vue({
      el: '#app',
      data() {
          return {
              name: "",
              email: "",
              message: "",
          };
      },
      methods: {
          async submitForm() {
              // Validate inputs
              if (!this.name || !this.email || !this.message || !this.isValidEmail(this.email)) {
                  alert("Please fill in all fields correctly.");
                  return;
              }


                  await Promise.all([
                      this.submitToWeb3Forms(),
                      this.submitToContactPHP()
                  ]);

                  // Reset form fields
                  this.clearForm();

                  alert("Messages sent successfully to both sites!");

          },
          async submitToWeb3Forms() {
              const response = await fetch("https://api.web3forms.com/submit", {
                  method: "POST",
                  headers: {
                      "Content-Type": "application/json",
                      Accept: "application/json",
                  },
                  body: JSON.stringify({
                      access_key: WEB3FORMS_ACCESS_KEY,
                      name: this.name,
                      email: this.email,
                      message: this.message,
                  }),
              });
              const result = await response.json();
              if (!result.success) {
                  throw new Error("Message sending failed to Web3Forms.");
              }
          },
          async submitToContactPHP() {
              // You need to implement the logic to send data to contact.php
              // This might involve using a similar fetch request as above, but with the appropriate endpoint and parameters.
              // For example:
              
              const response = await fetch("contact.php", {
                  method: "POST",
                  headers: {
                      "Content-Type": "application/json",
                      Accept: "application/json",
                  },
                  body: JSON.stringify({
                      name: this.name,
                      email: this.email,
                      message: this.message,
                  }),
              });
              const result = await response.json();
              
              localStorage.setItem('formData', JSON.stringify(result));
              // Redirect to thank-you.html
              window.location.href = 'thank-you.html';
              
          },
          isValidEmail(email) {
              // Email validation regex
              const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
              return emailRegex.test(email);
          },
          clearForm() {
              // Clear form fields
              this.name = '';
              this.email = '';
              this.message = '';
          }
      },
  });
</script>

<!--

    <!- the script that used at vueForm ->
    <script>
      const WEB3FORMS_ACCESS_KEY = "57b77d34-87b6-4feb-8fc5-459172a8fe91";
   
      // Define Vue component
      const App = new Vue({
        el: '#app',
        data() {
          return {
            name: "",
            email: "",
            message: "",
          };
        },
        methods: {
          async submitForm() {
            // Validate inputs
            if (!this.name || !this.email || !this.message || !this.isValidEmail(this.email)) {
              alert("Please fill in all fields correctly.");
              return;
            }

            const response = await fetch("contact.php", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                Accept: "application/json",
              },
              body: JSON.stringify({
                access_key: WEB3FORMS_ACCESS_KEY,
                name: this.name,
                email: this.email,
                message: this.message,
              }),
            });
            const result = await response.json();
            if (result.success) {
              alert("Message sent successfully!");
              // Reset form fields
              this.name = "";
              this.email = "";
              this.message = "";
            } else {
              alert("Message sending failed. Please try again later.");
            }
          },
          isValidEmail(email) {
            // Email validation regex
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
          },
          clearForm() {
            // Clear form fields
            this.name = '';
            this.email = '';
            this.message = '';
          }
        },
      });
     </script>

    -->

    <!-- the script that used at jsForm -->
    <script>
      const form = document.getElementById('jsForm');
      const result = document.getElementById('result');
      function clearTheFormWithJS(){
        document.getElementById("JSname").value ="";
        document.getElementById("JSemail").value ="";
        document.getElementById("JSmessage").value ="";
      }
      var name;
      var email;
      var message;

      const isValidEmail = (email) => {
          // Email validation regex
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          return emailRegex.test(email);
      }

      const submitToWeb3Forms = async () => {
        const response = await fetch("https://api.web3forms.com/submit", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                Accept: "application/json",
            },
            body: JSON.stringify({
                access_key: WEB3FORMS_ACCESS_KEY,
                name: name,
                email: email,
                message: message,
            }),
        });
        const result = await response.json();
        if (!result.success) {
            throw new Error("Message sending failed to Web3Forms.");
        }
      }

          const submitToContactPHP = async () => {
              // You need to implement the logic to send data to contact.php
              // This might involve using a similar fetch request as above, but with the appropriate endpoint and parameters.
              // For example:
              
              const response = await fetch("contact.php", {
                  method: "POST",
                  headers: {
                      "Content-Type": "application/json",
                      Accept: "application/json",
                  },
                  body: JSON.stringify({
                      name: name,
                      email: email,
                      message: message,
                  }),
              });
              const result = await response.json();
              
              localStorage.setItem('formData', JSON.stringify(result));
              // Redirect to thank-you.html
              window.location.href = 'thank-you.html';
              
          }

      form.addEventListener('submit', async (e) => {
          const formData = new FormData(form);
          e.preventDefault();
          name = document.getElementById("JSname").value;
          email = document.getElementById("JSemail").value;
          message = document.getElementById("JSmessage").value;
          if (!name || !email || !message || !isValidEmail(email)) {
              alert("Please fill in all fields correctly.");
              return;
          }
      
          const object = Object.fromEntries(formData);
          const json = JSON.stringify(object);
      
          result.innerHTML = "Please wait..."
      
          await Promise.all([
              submitToWeb3Forms(),
              submitToContactPHP()
          ]);
      });
      </script>    
    <script src="https://web3forms.com/client/script.js" async defer></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

    <script src ="javascript.js"></script>
</body>
</html>